<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Road & Lane Closures Map</title>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.18/esri/themes/light/main.css"
    />
  </head>
  <body>
    <div id="viewDiv"></div>

    <script src="https://js.arcgis.com/4.18/"></script>
    <script>
      const portalItem = { id: '36ec601ba440417ead12dc49d612665d' }

      require([
        'esri/WebMap',
        'esri/views/MapView',
        'esri/widgets/Home',
        'esri/widgets/Legend',
        'esri/Graphic',
        'esri/widgets/Expand',
      ], function (WebMap, MapView, Home, Legend, Graphic, Expand) {
        const map = new WebMap({ portalItem })

        const view = new MapView({
          container: 'viewDiv',
          map,
        })

        view.when(() => {
          const layer = map.layers.getItemAt(0)

          // map widgets

          // adds the home widget to the top left corner of the MapView
          const homeWidget = new Home({ view })
          view.ui.add(homeWidget, 'top-left')

          // add legend
          const legend = new Legend({
            view,
            layerInfos: [
              {
                layer,
                title: 'Legend',
              },
            ],
            container: document.createElement('div'),
          })

          const legendExpand = new Expand({
            expandIconClass: 'esri-icon-layer-list',
            expandTooltip: 'Expand Legend',
            view,
            content: legend.domNode,
          })

          view.ui.add(legend, 'bottom-left')
          view.ui.add(legendExpand, 'top-left')
        })
      })
    </script>
  </body>
</html>
